import{R as st,S as we,i as Ve,s as De,e as v,k as P,t as D,c as y,a as k,d as f,m as H,h as j,b as d,g as F,J as n,K as Fe,L as ge,N as lt,l as Y,n as $,T as Te,j as re,U as rt,x as ke,y as Ie,z as Ee,V as je,q as Oe,r as fe,p as he,C as Ne,W as Ge,X as it,o as Se,Y as Ue,Z as at}from"../../../chunks/index-74b427f3.js";import{a as J,D as nt}from"../../../chunks/index-53f1fd0e.js";const ot=()=>{const a=st("__svelte__");return{page:{subscribe:a.page.subscribe},navigating:{subscribe:a.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:a.navigating.subscribe}},session:a.session,updated:a.updated}},ct={subscribe(a){return ot().page.subscribe(a)}};function We(a){let t,e,s,r,l,i,u,o,_,h,p,b,I,g,N,x,B,V,q,T,ee;return{c(){t=v("div"),e=v("div"),s=v("div"),r=P(),l=v("span"),i=D("\u200B"),u=P(),o=v("div"),_=v("div"),h=v("div"),p=v("label"),b=D(`Display
                            name`),I=P(),g=v("div"),N=v("input"),x=P(),B=v("div"),V=v("button"),q=D("Save display name"),this.h()},l(M){t=y(M,"DIV",{class:!0,"aria-labelledby":!0,role:!0,"aria-modal":!0});var G=k(t);e=y(G,"DIV",{class:!0});var C=k(e);s=y(C,"DIV",{class:!0,"aria-hidden":!0}),k(s).forEach(f),r=H(C),l=y(C,"SPAN",{class:!0,"aria-hidden":!0});var z=k(l);i=j(z,"\u200B"),z.forEach(f),u=H(C),o=y(C,"DIV",{class:!0});var R=k(o);_=y(R,"DIV",{});var oe=k(_);h=y(oe,"DIV",{});var te=k(h);p=y(te,"LABEL",{for:!0,class:!0});var Z=k(p);b=j(Z,`Display
                            name`),Z.forEach(f),I=H(te),g=y(te,"DIV",{class:!0});var L=k(g);N=y(L,"INPUT",{placeholder:!0,id:!0,name:!0,type:!0,class:!0}),L.forEach(f),te.forEach(f),oe.forEach(f),x=H(R),B=y(R,"DIV",{class:!0});var Q=k(B);V=y(Q,"BUTTON",{type:!0,class:!0});var K=k(V);q=j(K,"Save display name"),K.forEach(f),Q.forEach(f),R.forEach(f),C.forEach(f),G.forEach(f),this.h()},h(){d(s,"class","fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"),d(s,"aria-hidden","true"),d(l,"class","hidden sm:inline-block sm:align-middle sm:h-screen"),d(l,"aria-hidden","true"),d(p,"for","displayName"),d(p,"class","block text-sm font-medium text-gray-700"),d(N,"placeholder","Enter your display name..."),d(N,"id","displayName"),d(N,"name","displayName"),d(N,"type","text"),N.required=!0,d(N,"class","appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-rose-500 focus:border-rose-500 sm:text-sm"),d(g,"class","mt-1"),d(V,"type","button"),d(V,"class","inline-flex justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-rose-600 text-base font-medium text-white hover:bg-rose-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500 sm:text-sm"),d(B,"class","mt-5 sm:mt-6"),d(o,"class","relative inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-sm sm:w-full sm:p-6"),d(e,"class","flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"),d(t,"class","fixed z-10 inset-0 overflow-y-auto"),d(t,"aria-labelledby","modal-title"),d(t,"role","dialog"),d(t,"aria-modal","true")},m(M,G){F(M,t,G),n(t,e),n(e,s),n(e,r),n(e,l),n(l,i),n(e,u),n(e,o),n(o,_),n(_,h),n(h,p),n(p,b),n(h,I),n(h,g),n(g,N),Fe(N,a[1]),n(o,x),n(o,B),n(B,V),n(V,q),T||(ee=[ge(N,"input",a[4]),ge(V,"click",a[3])],T=!0)},p(M,G){G&2&&N.value!==M[1]&&Fe(N,M[1])},d(M){M&&f(t),T=!1,lt(ee)}}}function ft(a){var s,r;let t,e=!((r=(s=a[2])==null?void 0:s.displayNames)!=null&&r[J.userId])&&We(a);return{c(){e&&e.c(),t=Y()},l(l){e&&e.l(l),t=Y()},m(l,i){e&&e.m(l,i),F(l,t,i)},p(l,[i]){var u,o;(o=(u=l[2])==null?void 0:u.displayNames)!=null&&o[J.userId]?e&&(e.d(1),e=null):e?e.p(l,i):(e=We(l),e.c(),e.m(t.parentNode,t))},i:$,o:$,d(l){e&&e.d(l),l&&f(t)}}}function ut(a,t,e){let s,r=$,l=()=>(r(),r=Te(i,h=>e(2,s=h)),i);a.$$.on_destroy.push(()=>r());let{game:i}=t;l();let u;function o(){e(0,i.displayNames[J.userId]=u,i)}function _(){u=this.value,e(1,u)}return a.$$set=h=>{"game"in h&&l(e(0,i=h.game))},[i,u,s,o,_]}class dt extends we{constructor(t){super(),Ve(this,t,ut,ft,De,{game:0})}}function mt(a){var _,h;let t,e,s=(h=(_=a[3])==null?void 0:_.votes)!=null&&h[a[1]]?"":"?",r,l,i,u,o;return{c(){t=v("div"),e=v("div"),r=D(s),i=P(),u=v("strong"),o=D(a[2]),this.h()},l(p){t=y(p,"DIV",{class:!0});var b=k(t);e=y(b,"DIV",{class:!0});var I=k(e);r=j(I,s),I.forEach(f),i=H(b),u=y(b,"STRONG",{class:!0});var g=k(u);o=j(g,a[2]),g.forEach(f),b.forEach(f),this.h()},h(){var p,b;d(e,"class",l=((b=(p=a[3])==null?void 0:p.votes)!=null&&b[a[1]]?"border-rose-600 bg-rose-200":"border-gray-400 bg-gray-200")+" block w-10 h-16 border-2 rounded-lg flex items-center justify-center cursor-pointer"),d(u,"class","font-bold"),d(t,"class","flex justify-center items-center flex-col")},m(p,b){F(p,t,b),n(t,e),n(e,r),n(t,i),n(t,u),n(u,o)},p(p,[b]){var I,g,N,x;b&10&&s!==(s=(g=(I=p[3])==null?void 0:I.votes)!=null&&g[p[1]]?"":"?")&&re(r,s),b&10&&l!==(l=((x=(N=p[3])==null?void 0:N.votes)!=null&&x[p[1]]?"border-rose-600 bg-rose-200":"border-gray-400 bg-gray-200")+" block w-10 h-16 border-2 rounded-lg flex items-center justify-center cursor-pointer")&&d(e,"class",l),b&4&&re(o,p[2])},i:$,o:$,d(p){p&&f(t)}}}function ht(a,t,e){let s,r=$,l=()=>(r(),r=Te(i,_=>e(3,s=_)),i);a.$$.on_destroy.push(()=>r());let{game:i}=t;l();let{userId:u,displayName:o}=t;return a.$$set=_=>{"game"in _&&l(e(0,i=_.game)),"userId"in _&&e(1,u=_.userId),"displayName"in _&&e(2,o=_.displayName)},[i,u,o,s]}class tt extends we{constructor(t){super(),Ve(this,t,ht,mt,De,{game:0,userId:1,displayName:2})}}function Ce(a,t,e){const s=a.slice();return s[7]=t[e][0],s[8]=t[e][1],s}function Me(a){var ce,ue;let t,e,s,r,l,i,u,o,_,h,p,b,I,g,N,x,B,V,q,T,ee,M,G,C,z,R,oe,te,Z,L,Q,K,_e,X=Object.entries(((ce=a[2])==null?void 0:ce.votes)||{}),O=[];for(let A=0;A<X.length;A+=1)O[A]=xe(Ce(a,X,A));let U=((ue=a[2])==null?void 0:ue.userId)===J.userId&&qe(a);return{c(){t=v("div"),e=v("div"),s=v("div"),r=P(),l=v("span"),i=D("\u200B"),u=P(),o=v("div"),_=v("h2"),h=D("Voting Results"),p=P(),b=v("div"),I=v("div"),g=v("div"),N=D(a[3]),x=P(),B=v("span"),V=D("Average"),q=P(),T=v("div"),ee=v("div"),M=D(a[4]),G=P(),C=v("span"),z=D("Top vote - "),R=D(a[1]),oe=D(" times"),te=P(),Z=v("h2"),L=D("Player votes"),Q=P(),K=v("div");for(let A=0;A<O.length;A+=1)O[A].c();_e=P(),U&&U.c(),this.h()},l(A){t=y(A,"DIV",{class:!0,"aria-labelledby":!0,role:!0,"aria-modal":!0});var S=k(t);e=y(S,"DIV",{class:!0});var W=k(e);s=y(W,"DIV",{class:!0,"aria-hidden":!0}),k(s).forEach(f),r=H(W),l=y(W,"SPAN",{class:!0,"aria-hidden":!0});var de=k(l);i=j(de,"\u200B"),de.forEach(f),u=H(W),o=y(W,"DIV",{class:!0});var E=k(o);_=y(E,"H2",{class:!0});var ie=k(_);h=j(ie,"Voting Results"),ie.forEach(f),p=H(E),b=y(E,"DIV",{class:!0});var pe=k(b);I=y(pe,"DIV",{class:!0});var be=k(I);g=y(be,"DIV",{class:!0});var ve=k(g);N=j(ve,a[3]),ve.forEach(f),x=H(be),B=y(be,"SPAN",{});var c=k(B);V=j(c,"Average"),c.forEach(f),be.forEach(f),q=H(pe),T=y(pe,"DIV",{class:!0});var m=k(T);ee=y(m,"DIV",{class:!0});var w=k(ee);M=j(w,a[4]),w.forEach(f),G=H(m),C=y(m,"SPAN",{});var ae=k(C);z=j(ae,"Top vote - "),R=j(ae,a[1]),oe=j(ae," times"),ae.forEach(f),m.forEach(f),pe.forEach(f),te=H(E),Z=y(E,"H2",{class:!0});var ne=k(Z);L=j(ne,"Player votes"),ne.forEach(f),Q=H(E),K=y(E,"DIV",{class:!0});var me=k(K);for(let se=0;se<O.length;se+=1)O[se].l(me);me.forEach(f),_e=H(E),U&&U.l(E),E.forEach(f),W.forEach(f),S.forEach(f),this.h()},h(){d(s,"class","fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"),d(s,"aria-hidden","true"),d(l,"class","hidden sm:inline-block sm:align-middle sm:h-screen"),d(l,"aria-hidden","true"),d(_,"class","font-bold mb-2"),d(g,"class","border-rose-600 bg-rose-200 block w-10 h-16 border-2 rounded-lg flex items-center justify-center"),d(I,"class","flex justify-center items-center flex-col"),d(ee,"class","block w-10 h-16 border-2 border-gray-400 bg-gray-200 rounded-lg flex items-center justify-center"),d(T,"class","flex justify-center items-center flex-col"),d(b,"class","flex space-x-10 mb-10"),d(Z,"class","font-bold mb-2"),d(K,"class","flex space-x-10 mb-2"),d(o,"class","relative inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-sm sm:w-full sm:p-6"),d(e,"class","flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"),d(t,"class","fixed z-10 inset-0 overflow-y-auto"),d(t,"aria-labelledby","modal-title"),d(t,"role","dialog"),d(t,"aria-modal","true")},m(A,S){F(A,t,S),n(t,e),n(e,s),n(e,r),n(e,l),n(l,i),n(e,u),n(e,o),n(o,_),n(_,h),n(o,p),n(o,b),n(b,I),n(I,g),n(g,N),n(I,x),n(I,B),n(B,V),n(b,q),n(b,T),n(T,ee),n(ee,M),n(T,G),n(T,C),n(C,z),n(C,R),n(C,oe),n(o,te),n(o,Z),n(Z,L),n(o,Q),n(o,K);for(let W=0;W<O.length;W+=1)O[W].m(K,null);n(o,_e),U&&U.m(o,null)},p(A,S){var W,de;if(S&8&&re(N,A[3]),S&16&&re(M,A[4]),S&2&&re(R,A[1]),S&4){X=Object.entries(((W=A[2])==null?void 0:W.votes)||{});let E;for(E=0;E<X.length;E+=1){const ie=Ce(A,X,E);O[E]?O[E].p(ie,S):(O[E]=xe(ie),O[E].c(),O[E].m(K,null))}for(;E<O.length;E+=1)O[E].d(1);O.length=X.length}((de=A[2])==null?void 0:de.userId)===J.userId?U?U.p(A,S):(U=qe(A),U.c(),U.m(o,null)):U&&(U.d(1),U=null)},d(A){A&&f(t),rt(O,A),U&&U.d()}}}function xe(a){var h,p;let t,e,s=a[8]+"",r,l,i,u=((p=(h=a[2])==null?void 0:h.displayNames)==null?void 0:p[a[7]])+"",o,_;return{c(){t=v("div"),e=v("div"),r=D(s),l=P(),i=v("span"),o=D(u),_=P(),this.h()},l(b){t=y(b,"DIV",{class:!0});var I=k(t);e=y(I,"DIV",{class:!0});var g=k(e);r=j(g,s),g.forEach(f),l=H(I),i=y(I,"SPAN",{});var N=k(i);o=j(N,u),N.forEach(f),_=H(I),I.forEach(f),this.h()},h(){d(e,"class","block w-10 h-16 border-2 border-gray-400 bg-gray-200 rounded-lg flex items-center justify-center"),d(t,"class","flex justify-center items-center flex-col")},m(b,I){F(b,t,I),n(t,e),n(e,r),n(t,l),n(t,i),n(i,o),n(t,_)},p(b,I){var g,N;I&4&&s!==(s=b[8]+"")&&re(r,s),I&4&&u!==(u=((N=(g=b[2])==null?void 0:g.displayNames)==null?void 0:N[b[7]])+"")&&re(o,u)},d(b){b&&f(t)}}}function qe(a){let t,e,s,r,l;return{c(){t=v("div"),e=v("button"),s=D("Start new voting"),this.h()},l(i){t=y(i,"DIV",{class:!0});var u=k(t);e=y(u,"BUTTON",{type:!0,class:!0});var o=k(e);s=j(o,"Start new voting"),o.forEach(f),u.forEach(f),this.h()},h(){d(e,"type","button"),d(e,"class","inline-flex justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-rose-600 text-base font-medium text-white hover:bg-rose-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500 sm:text-sm"),d(t,"class","mt-5 sm:mt-6")},m(i,u){F(i,t,u),n(t,e),n(e,s),r||(l=ge(e,"click",a[5]),r=!0)},p:$,d(i){i&&f(t),r=!1,l()}}}function _t(a){var s;let t,e=((s=a[2])==null?void 0:s.status)==="FINISHED"&&Me(a);return{c(){e&&e.c(),t=Y()},l(r){e&&e.l(r),t=Y()},m(r,l){e&&e.m(r,l),F(r,t,l)},p(r,[l]){var i;((i=r[2])==null?void 0:i.status)==="FINISHED"?e?e.p(r,l):(e=Me(r),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:$,o:$,d(r){e&&e.d(r),r&&f(t)}}}function pt(a,t,e){let s,r=$,l=()=>(r(),r=Te(i,b=>e(2,s=b)),i);a.$$.on_destroy.push(()=>r());let{game:i}=t;l();let u,o,_=0,h={};function p(){e(0,i.votes={},i),e(0,i.status="VOTING",i)}return a.$$set=b=>{"game"in b&&l(e(0,i=b.game))},a.$$.update=()=>{if(a.$$.dirty&70){e(1,_=0),e(6,h={});const b=Object.entries((s==null?void 0:s.votes)||{});let I=0;b.forEach(([,g])=>{Number.isFinite(Number(g))&&(I+=Number(g)),h[g]||e(6,h[g]=0,h),e(6,h[g]++,h)}),Object.entries(h).forEach(([g,N])=>{N>_&&(e(4,o=g),e(1,_=N))}),e(3,u=(I/b.length).toFixed(1))}},[i,_,s,u,o,p,h]}class bt extends we{constructor(t){super(),Ve(this,t,pt,_t,De,{game:0})}}function ze(a,t,e){const s=a.slice();return s[11]=t[e],s[13]=e,s}function Le(a,t,e){const s=a.slice();return s[14]=t[e][0],s[15]=t[e][1],s}function Je(a,t,e){const s=a.slice();return s[14]=t[e][0],s[15]=t[e][1],s}function Ke(a){var be,ve;let t,e,s,r,l,i,u,o=a[0].name+"",_,h,p,b,I=((be=a[0].displayNames)==null?void 0:be[J.userId])+"",g,N,x,B,V,q,T=[],ee=new Map,M,G,C,z,R=[],oe=new Map,te,Z,L,Q,K,_e,X,O=[],U=new Map,ce;t=new dt({props:{game:a[1]}}),s=new bt({props:{game:a[1]}});let ue=a[2];const A=c=>c[14];for(let c=0;c<ue.length;c+=1){let m=Je(a,ue,c),w=A(m);ee.set(w,T[c]=Xe(w,m))}let S=a[0].status==="VOTING"&&Ye(a),W=a[3];const de=c=>c[14];for(let c=0;c<W.length;c+=1){let m=Le(a,W,c),w=de(m);oe.set(w,R[c]=Ze(w,m))}let E=((ve=a[0])==null?void 0:ve.userId)===J.userId&&Qe(a),ie=a[0].votingOptions;const pe=c=>c[13];for(let c=0;c<ie.length;c+=1){let m=ze(a,ie,c),w=pe(m);U.set(w,O[c]=et(w,m))}return{c(){ke(t.$$.fragment),e=P(),ke(s.$$.fragment),r=P(),l=v("section"),i=v("div"),u=v("h2"),_=D(o),h=P(),p=v("p"),b=D("Hi "),g=D(I),N=D("!"),x=P(),B=v("div"),V=v("div"),q=v("div");for(let c=0;c<T.length;c+=1)T[c].c();M=P(),G=v("div"),S&&S.c(),C=P(),z=v("div");for(let c=0;c<R.length;c+=1)R[c].c();te=P(),E&&E.c(),Z=P(),L=v("div"),Q=v("h1"),K=D("Voting Options"),_e=P(),X=v("div");for(let c=0;c<O.length;c+=1)O[c].c();this.h()},l(c){Ie(t.$$.fragment,c),e=H(c),Ie(s.$$.fragment,c),r=H(c),l=y(c,"SECTION",{class:!0});var m=k(l);i=y(m,"DIV",{class:!0});var w=k(i);u=y(w,"H2",{class:!0});var ae=k(u);_=j(ae,o),ae.forEach(f),h=H(w),p=y(w,"P",{class:!0});var ne=k(p);b=j(ne,"Hi "),g=j(ne,I),N=j(ne,"!"),ne.forEach(f),w.forEach(f),x=H(m),B=y(m,"DIV",{class:!0});var me=k(B);V=y(me,"DIV",{class:!0});var se=k(V);q=y(se,"DIV",{id:!0,class:!0});var Ae=k(q);for(let le=0;le<T.length;le+=1)T[le].l(Ae);Ae.forEach(f),M=H(se),G=y(se,"DIV",{id:!0,class:!0});var Pe=k(G);S&&S.l(Pe),Pe.forEach(f),C=H(se),z=y(se,"DIV",{id:!0,class:!0});var He=k(z);for(let le=0;le<R.length;le+=1)R[le].l(He);He.forEach(f),te=H(se),E&&E.l(se),se.forEach(f),me.forEach(f),Z=H(m),L=y(m,"DIV",{class:!0});var ye=k(L);Q=y(ye,"H1",{class:!0});var Re=k(Q);K=j(Re,"Voting Options"),Re.forEach(f),_e=H(ye),X=y(ye,"DIV",{class:!0});var Be=k(X);for(let le=0;le<O.length;le+=1)O[le].l(Be);Be.forEach(f),ye.forEach(f),m.forEach(f),this.h()},h(){d(u,"class","font-bold text-3xl text-rose-600"),d(p,"class","text-lg flex items-center text-rose-600 mr-4"),d(i,"class","flex p-2 bg-gray-100 flex place-content-between items-center"),d(q,"id","players-top"),d(q,"class","flex items-center justify-center place-content-between space-x-10 pb-2"),d(G,"id","board"),d(G,"class","rounded-3xl bg-rose-600 h-40 space-y-2 flex flex-col items-center justify-center text-white"),d(z,"id","players-bottom"),d(z,"class","flex items-center justify-center place-content-between space-x-10 pt-2"),d(V,"class","w-full sm:w-2/3 md:w-1/3 "),d(B,"class","flex-1 flex items-center justify-center p-2"),d(Q,"class","flex items-center"),d(X,"class","py-4 flex space-x-1 justify-center items-center"),d(L,"class","p-4 bg-gray-100 flex justify-center flex-col items-center"),d(l,"class","flex flex-col h-screen")},m(c,m){Ee(t,c,m),F(c,e,m),Ee(s,c,m),F(c,r,m),F(c,l,m),n(l,i),n(i,u),n(u,_),n(i,h),n(i,p),n(p,b),n(p,g),n(p,N),n(l,x),n(l,B),n(B,V),n(V,q);for(let w=0;w<T.length;w+=1)T[w].m(q,null);n(V,M),n(V,G),S&&S.m(G,null),n(V,C),n(V,z);for(let w=0;w<R.length;w+=1)R[w].m(z,null);n(V,te),E&&E.m(V,null),n(l,Z),n(l,L),n(L,Q),n(Q,K),n(L,_e),n(L,X);for(let w=0;w<O.length;w+=1)O[w].m(X,null);ce=!0},p(c,m){var ne,me;const w={};m&2&&(w.game=c[1]),t.$set(w);const ae={};m&2&&(ae.game=c[1]),s.$set(ae),(!ce||m&1)&&o!==(o=c[0].name+"")&&re(_,o),(!ce||m&1)&&I!==(I=((ne=c[0].displayNames)==null?void 0:ne[J.userId])+"")&&re(g,I),m&6&&(ue=c[2],Se(),T=je(T,m,A,1,c,ue,ee,q,Ue,Xe,null,Je),Oe()),c[0].status==="VOTING"?S?S.p(c,m):(S=Ye(c),S.c(),S.m(G,null)):S&&(S.d(1),S=null),m&10&&(W=c[3],Se(),R=je(R,m,de,1,c,W,oe,z,Ue,Ze,null,Le),Oe()),((me=c[0])==null?void 0:me.userId)===J.userId?E?E.p(c,m):(E=Qe(c),E.c(),E.m(V,null)):E&&(E.d(1),E=null),m&65&&(ie=c[0].votingOptions,O=je(O,m,pe,1,c,ie,U,X,at,et,null,ze))},i(c){if(!ce){fe(t.$$.fragment,c),fe(s.$$.fragment,c);for(let m=0;m<ue.length;m+=1)fe(T[m]);for(let m=0;m<W.length;m+=1)fe(R[m]);ce=!0}},o(c){he(t.$$.fragment,c),he(s.$$.fragment,c);for(let m=0;m<T.length;m+=1)he(T[m]);for(let m=0;m<R.length;m+=1)he(R[m]);ce=!1},d(c){Ne(t,c),c&&f(e),Ne(s,c),c&&f(r),c&&f(l);for(let m=0;m<T.length;m+=1)T[m].d();S&&S.d();for(let m=0;m<R.length;m+=1)R[m].d();E&&E.d();for(let m=0;m<O.length;m+=1)O[m].d()}}}function Xe(a,t){let e,s,r;return s=new tt({props:{game:t[1],userId:t[14],displayName:t[15]}}),{key:a,first:null,c(){e=Y(),ke(s.$$.fragment),this.h()},l(l){e=Y(),Ie(s.$$.fragment,l),this.h()},h(){this.first=e},m(l,i){F(l,e,i),Ee(s,l,i),r=!0},p(l,i){t=l;const u={};i&2&&(u.game=t[1]),i&4&&(u.userId=t[14]),i&4&&(u.displayName=t[15]),s.$set(u)},i(l){r||(fe(s.$$.fragment,l),r=!0)},o(l){he(s.$$.fragment,l),r=!1},d(l){l&&f(e),Ne(s,l)}}}function Ye(a){let t;function e(l,i){var u;return(u=l[0].votes)!=null&&u[J.userId]?vt:gt}let s=e(a),r=s(a);return{c(){r.c(),t=Y()},l(l){r.l(l),t=Y()},m(l,i){r.m(l,i),F(l,t,i)},p(l,i){s===(s=e(l))&&r?r.p(l,i):(r.d(1),r=s(l),r&&(r.c(),r.m(t.parentNode,t)))},d(l){r.d(l),l&&f(t)}}}function gt(a){let t;return{c(){t=D("Waiting for your vote")},l(e){t=j(e,"Waiting for your vote")},m(e,s){F(e,t,s)},p:$,d(e){e&&f(t)}}}function vt(a){let t;function e(l,i){return l[4].length>0?kt:yt}let s=e(a),r=s(a);return{c(){r.c(),t=Y()},l(l){r.l(l),t=Y()},m(l,i){r.m(l,i),F(l,t,i)},p(l,i){s===(s=e(l))&&r?r.p(l,i):(r.d(1),r=s(l),r&&(r.c(),r.m(t.parentNode,t)))},d(l){r.d(l),l&&f(t)}}}function yt(a){let t;return{c(){t=D("Waiting for admin to finish round")},l(e){t=j(e,"Waiting for admin to finish round")},m(e,s){F(e,t,s)},p:$,d(e){e&&f(t)}}}function kt(a){let t,e=a[4].join(",")+"",s;return{c(){t=D("Waiting for "),s=D(e)},l(r){t=j(r,"Waiting for "),s=j(r,e)},m(r,l){F(r,t,l),F(r,s,l)},p(r,l){l&16&&e!==(e=r[4].join(",")+"")&&re(s,e)},d(r){r&&f(t),r&&f(s)}}}function Ze(a,t){let e,s,r;return s=new tt({props:{game:t[1],userId:t[14],displayName:t[15]}}),{key:a,first:null,c(){e=Y(),ke(s.$$.fragment),this.h()},l(l){e=Y(),Ie(s.$$.fragment,l),this.h()},h(){this.first=e},m(l,i){F(l,e,i),Ee(s,l,i),r=!0},p(l,i){t=l;const u={};i&2&&(u.game=t[1]),i&8&&(u.userId=t[14]),i&8&&(u.displayName=t[15]),s.$set(u)},i(l){r||(fe(s.$$.fragment,l),r=!0)},o(l){he(s.$$.fragment,l),r=!1},d(l){l&&f(e),Ne(s,l)}}}function Qe(a){let t,e=a[4].length<Object.keys(a[0].votes||{}).length,s,r,l,i,u,o=e&&$e(a);return{c(){t=v("div"),o&&o.c(),s=P(),r=v("button"),l=D(`Reset
                            Voting`),this.h()},l(_){t=y(_,"DIV",{id:!0,class:!0});var h=k(t);o&&o.l(h),s=H(h),r=y(h,"BUTTON",{class:!0});var p=k(r);l=j(p,`Reset
                            Voting`),p.forEach(f),h.forEach(f),this.h()},h(){d(r,"class","rounded bg-white text-gray-500 p-2 hover:ring-2"),d(t,"id","board-controls"),d(t,"class","flex items-center justify-center space-x-2")},m(_,h){F(_,t,h),o&&o.m(t,null),n(t,s),n(t,r),n(r,l),i||(u=ge(r,"click",a[5]),i=!0)},p(_,h){h&17&&(e=_[4].length<Object.keys(_[0].votes||{}).length),e?o?o.p(_,h):(o=$e(_),o.c(),o.m(t,s)):o&&(o.d(1),o=null)},d(_){_&&f(t),o&&o.d(),i=!1,u()}}}function $e(a){let t,e,s,r;return{c(){t=v("button"),e=D(`Finish
                                Round`),this.h()},l(l){t=y(l,"BUTTON",{class:!0});var i=k(t);e=j(i,`Finish
                                Round`),i.forEach(f),this.h()},h(){d(t,"class","rounded bg-white text-gray-500 p-2 hover:ring-2")},m(l,i){F(l,t,i),n(t,e),s||(r=ge(t,"click",a[7]),s=!0)},p:$,d(l){l&&f(t),s=!1,r()}}}function et(a,t){let e,s=t[11]+"",r,l,i,u,o;function _(){return t[8](t[11])}return{key:a,first:null,c(){e=v("div"),r=D(s),l=P(),this.h()},l(h){e=y(h,"DIV",{class:!0});var p=k(e);r=j(p,s),l=H(p),p.forEach(f),this.h()},h(){var h;d(e,"class",i="block w-10 h-16 border-2 "+(((h=t[0].votes)==null?void 0:h[J.userId])===t[11]?"border-rose-600":"border-gray-400")+" rounded-lg flex items-center justify-center cursor-pointer"),this.first=e},m(h,p){F(h,e,p),n(e,r),n(e,l),u||(o=ge(e,"click",_),u=!0)},p(h,p){var b;t=h,p&1&&s!==(s=t[11]+"")&&re(r,s),p&1&&i!==(i="block w-10 h-16 border-2 "+(((b=t[0].votes)==null?void 0:b[J.userId])===t[11]?"border-rose-600":"border-gray-400")+" rounded-lg flex items-center justify-center cursor-pointer")&&d(e,"class",i)},d(h){h&&f(e),u=!1,o()}}}function It(a){let t,e,s=a[0]&&Ke(a);return{c(){s&&s.c(),t=Y()},l(r){s&&s.l(r),t=Y()},m(r,l){s&&s.m(r,l),F(r,t,l),e=!0},p(r,[l]){r[0]?s?(s.p(r,l),l&1&&fe(s,1)):(s=Ke(r),s.c(),fe(s,1),s.m(t.parentNode,t)):s&&(Se(),he(s,1,1,()=>{s=null}),Oe())},i(r){e||(fe(s),e=!0)},o(r){he(s),e=!1},d(r){s&&s.d(r),r&&f(t)}}}function Et(a,t,e){let s,r;Ge(a,ct,g=>e(9,r=g));let i=new nt("games")[r.params.gameId];Ge(a,i,g=>e(0,s=g));let u=[],o=[],_=[];function h(){e(1,i.votes={},i),e(1,i.status="VOTING",i)}function p(g){e(1,i.votes[J.userId]=g,i)}function b(){e(1,i.status="FINISHED",i)}it(()=>{delete i.votes[J.userId],delete i.displayNames[J.userId]});const I=g=>p(g);return a.$$.update=()=>{if(a.$$.dirty&1){const g=Object.entries((s==null?void 0:s.displayNames)||{}),N=Math.ceil(g.length/2);e(2,u=g.slice(0,N)),e(3,o=g.slice(N));const x=g.filter(([B])=>{var V;return!((V=s==null?void 0:s.votes)!=null&&V[B])});e(4,_=x.map(([,B])=>B))}},[s,i,u,o,_,h,p,b,I]}class Vt extends we{constructor(t){super(),Ve(this,t,Et,It,De,{})}}export{Vt as default};
